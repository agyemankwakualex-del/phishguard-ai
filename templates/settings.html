{% extends "base.html" %}

{% block title %}Settings - PhishGuard AI{% endblock %}
{% block page_title %}Settings{% endblock %}

{% block content %}
<div class="settings-container">
    {% if message %}
    <div class="alert alert-success">
        âœ… {{ message }}
    </div>
    {% endif %}
    
    <!-- API Settings -->
    <div class="card">
        <div class="card-header">
            <h3>ðŸ”‘ API Configuration</h3>
        </div>
        <div class="card-body">
            <form method="POST" class="settings-form">
                <!-- Groq API -->
                <div class="form-group">
                    <label for="groq_api_key">
                        Groq API Key
                        {% if config.groq_configured %}
                            <span class="status-badge success">âœ“ Configured</span>
                        {% else %}
                            <span class="status-badge warning">Not configured</span>
                        {% endif %}
                    </label>
                    <input type="password" 
                           id="groq_api_key" 
                           name="groq_api_key" 
                           placeholder="Enter your Groq API key (gsk_...)"
                           class="form-input">
                    <small>
                        Used for AI-powered email analysis. 
                        <a href="https://console.groq.com" target="_blank">Get free key â†’</a>
                    </small>
                </div>
                
                <!-- VirusTotal API -->
                <div class="form-group">
                    <label for="virustotal_api_key">
                        VirusTotal API Key
                        {% if config.virustotal_configured %}
                            <span class="status-badge success">âœ“ Configured</span>
                        {% else %}
                            <span class="status-badge warning">Not configured</span>
                        {% endif %}
                    </label>
                    <input type="password" 
                           id="virustotal_api_key" 
                           name="virustotal_api_key" 
                           placeholder="Enter your VirusTotal API key"
                           class="form-input">
                    <small>
                        Used for checking suspicious links. 
                        <a href="https://www.virustotal.com" target="_blank">Get free key â†’</a>
                    </small>
                </div>
                
                <button type="submit" class="submit-button">
                    ðŸ’¾ Save Settings
                </button>
            </form>
        </div>
    </div>
    
    <!-- How to Get API Keys -->
    <div class="card">
        <div class="card-header">
            <h3>ðŸ“– How to Get API Keys</h3>
        </div>
        <div class="card-body">
            <div class="api-instructions">
                <div class="instruction-block">
                    <h4>ðŸ¤– Groq (AI Analysis)</h4>
                    <ol>
                        <li>Go to <a href="https://console.groq.com" target="_blank">console.groq.com</a></li>
                        <li>Sign up for a free account</li>
                        <li>Go to "API Keys" in the menu</li>
                        <li>Click "Create API Key"</li>
                        <li>Copy the key and paste it above</li>
                    </ol>
                </div>
                
                <div class="instruction-block">
                    <h4>ðŸ”— VirusTotal (Link Checking)</h4>
                    <ol>
                        <li>Go to <a href="https://www.virustotal.com" target="_blank">virustotal.com</a></li>
                        <li>Sign up for a free account</li>
                        <li>Click your profile icon (top right)</li>
                        <li>Select "API Key"</li>
                        <li>Copy the key and paste it above</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}